{% extends "base.html" %}
{% block content %}
<div class="auth-wrapper">
  <div class="auth-card">

    {# ---------- Flash‑Meldungen INSIDE der Card ---------- #}
    {% with messages = get_flashed_messages(with_categories=True) %}
      {% if messages %}
        <div class="flash-box">
          {% for cat,msg in messages %}
            <div class="flash {{cat}}">{{ msg }}</div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    <h2>Anmelden</h2>

    <form method="post" class="auth-form">
      <input name="username"  placeholder="Benutzername" required>
      <input type="password" name="password" placeholder="Passwort" required>
      <button type="submit">Einloggen</button>
    </form>

    <p class="auth-alt">
      Noch kein Konto? <a href="{{ url_for('register') }}">Registrieren</a>
    </p>
    <p class="auth-alt">
      Altes Konto löschen?
      <a href="#" id="openDeleteModal">Konto löschen</a>
    </p>

    {# ---------- Lösch‑Modal (zunächst unsichtbar) ---------- #}
    <div class="modal-overlay" id="deleteModal" hidden>
      <div class="modal-card">
        <h3>Konto wirklich löschen?</h3>
        <p>Bitte Benutzernamen <strong>zweimal</strong> eintippen und Passwort bestätigen.</p>

        <form id="deleteForm">
          <input name="username"  placeholder="Benutzername" required>
          <input name="username_confirm" placeholder="Benutzername (wiederholen)" required>
          <input type="password" name="password" placeholder="Passwort" required>
          <div class="modal-actions">
            <button type="button" id="cancelDelete">Abbrechen</button>
            <button type="submit"  class="danger">Löschen</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %}

